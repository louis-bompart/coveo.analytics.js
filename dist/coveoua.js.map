{"version":3,"sources":["webpack:///coveoua.js","webpack:///webpack/bootstrap 4bc27ccb2f93e914e9c3","webpack:///./src/browser.ts","webpack:///./src/simpleanalytics.ts","webpack:///./src/analytics.ts","webpack:///./~/whatwg-fetch/fetch.js","webpack:///./src/objectassign.ts","webpack:///./src/utils.ts","webpack:///./src/index.ts","webpack:///./src/history.ts","webpack:///./src/storage.ts","webpack:///./src/detector.ts","webpack:///./src/cookieutils.ts","webpack:///./src/donottrack.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","global","simpleanalytics_1","analytics","history_1","coveoua","q","forEach","args","apply","disableAutoHistory","store","HistoryStore","historyElement","name","value","document","location","toString","time","JSON","stringify","Date","title","addElement","coveoanalytics","Object","defineProperty","this","objectassign_1","utils_1","SimpleAPI","prototype","init","token","endpoint","Error","Endpoints","client","Client","sendEvent","send","event","customData","hash","window","sendViewEvent","referrer","language","navigator","contentIdKey","popFromObject","contentIdValue","contentType","simpleAPI","SimpleAnalytics","action","params","_i","arguments","length","actionFunction","fetch","defaultResponseTransformer","response","json","then","data","raw","Version","default","production","dev","staging","opts","version","eventType","request","getRestEndpoint","method","headers","getHeaders","mode","body","credentials","sendSearchEvent","sendClickEvent","sendCustomEvent","getVisit","getHealth","Content-Type","self","normalizeName","String","test","TypeError","toLowerCase","normalizeValue","iteratorFor","items","iterator","next","shift","done","undefined","support","iterable","Symbol","Headers","map","append","Array","isArray","header","getOwnPropertyNames","consumed","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","i","fromCharCode","join","bufferClone","slice","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","searchParams","URLSearchParams","arrayBuffer","isDataView","_bodyArrayBuffer","ArrayBuffer","isArrayBufferView","get","type","rejected","text","decode","parse","normalizeMethod","upcased","toUpperCase","methods","indexOf","Request","input","options","url","form","trim","split","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","e","viewClasses","obj","DataView","isView","oldValue","has","hasOwnProperty","callback","thisArg","keys","push","values","entries","clone","redirectStatuses","redirect","RangeError","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","polyfill","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","objectAssignPonyfill","target","sources","output","source","from","symbols","symbol","assign","object","history","donottrack","storage_1","STORE_KEY","MAX_NUMBER_OF_HISTORY_ELEMENTS","getAvailableStorage","elem","getHistory","setHistory","concat","getItem","setItem","clear","removeItem","detector","hasCookieStorage","CookieStorage","hasSessionStorage","sessionStorage","hasLocalStorage","localStorage","NullStorage","cookieutils_1","Cookie","erase","cookieEnabled","expiration","domain","domainParts","date","expires","host","setTime","getTime","toGMTString","hostname","cookie","cookiePrefix","cookieArray","substring","doNotTrack","msDoNotTrack"],"mappings":"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","file":"coveoua.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {\"use strict\";\r\n\tvar simpleanalytics_1 = __webpack_require__(1);\r\n\tvar analytics = __webpack_require__(6);\r\n\tvar history_1 = __webpack_require__(7);\r\n\tvar coveoua = global.coveoua || {};\r\n\tif (coveoua.q) {\r\n\t    coveoua.q.forEach(function (args) { return simpleanalytics_1.default.apply(void 0, args); });\r\n\t}\r\n\tif (!coveoua.disableAutoHistory) {\r\n\t    var store = new history_1.HistoryStore();\r\n\t    var historyElement = {\r\n\t        name: 'PageView',\r\n\t        value: document.location.toString(),\r\n\t        time: JSON.stringify(new Date()),\r\n\t        title: document.title\r\n\t    };\r\n\t    store.addElement(historyElement);\r\n\t}\r\n\tglobal.coveoua = simpleanalytics_1.default;\r\n\tglobal.coveoanalytics = analytics;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = coveoua;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar analytics = __webpack_require__(2);\r\n\tvar objectassign_1 = __webpack_require__(4);\r\n\tvar utils_1 = __webpack_require__(5);\r\n\tvar SimpleAPI = (function () {\r\n\t    function SimpleAPI() {\r\n\t    }\r\n\t    SimpleAPI.prototype.init = function (token, endpoint) {\r\n\t        if (typeof token === 'undefined') {\r\n\t            throw new Error(\"You must pass your token when you call 'init'\");\r\n\t        }\r\n\t        if (typeof token === 'string') {\r\n\t            endpoint = endpoint || analytics.Endpoints.default;\r\n\t            this.client = new analytics.Client({\r\n\t                token: token,\r\n\t                endpoint: endpoint\r\n\t            });\r\n\t        }\r\n\t        else if (typeof token === 'object' && typeof token.sendEvent !== 'undefined') {\r\n\t            this.client = token;\r\n\t        }\r\n\t        else {\r\n\t            throw new Error(\"You must pass either your token or a valid object when you call 'init'\");\r\n\t        }\r\n\t    };\r\n\t    SimpleAPI.prototype.send = function (event, customData) {\r\n\t        if (typeof this.client == 'undefined') {\r\n\t            throw new Error(\"You must call init before sending an event\");\r\n\t        }\r\n\t        customData = objectassign_1.default({}, {\r\n\t            hash: window.location.hash\r\n\t        }, customData);\r\n\t        switch (event) {\r\n\t            case 'pageview':\r\n\t                this.client.sendViewEvent({\r\n\t                    location: window.location.toString(),\r\n\t                    referrer: document.referrer,\r\n\t                    language: navigator.language,\r\n\t                    title: document.title,\r\n\t                    contentIdKey: utils_1.popFromObject(customData, 'contentIdKey'),\r\n\t                    contentIdValue: utils_1.popFromObject(customData, 'contentIdValue'),\r\n\t                    contentType: utils_1.popFromObject(customData, 'contentType'),\r\n\t                    customData: customData\r\n\t                });\r\n\t                return;\r\n\t            default:\r\n\t                throw new Error(\"Event type: '\" + event + \"' not implemented\");\r\n\t        }\r\n\t    };\r\n\t    return SimpleAPI;\r\n\t}());\r\n\texports.SimpleAPI = SimpleAPI;\r\n\tvar simpleAPI = new SimpleAPI();\r\n\texports.SimpleAnalytics = function (action) {\r\n\t    var params = [];\r\n\t    for (var _i = 1; _i < arguments.length; _i++) {\r\n\t        params[_i - 1] = arguments[_i];\r\n\t    }\r\n\t    var actionFunction = simpleAPI[action];\r\n\t    if (actionFunction) {\r\n\t        return actionFunction.apply(simpleAPI, params);\r\n\t    }\r\n\t};\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = exports.SimpleAnalytics;\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {\"use strict\";\r\n\texports.Version = 'v15';\r\n\texports.Endpoints = {\r\n\t    default: 'https://usageanalytics.coveo.com',\r\n\t    production: 'https://usageanalytics.coveo.com',\r\n\t    dev: 'https://usageanalyticsdev.coveo.com',\r\n\t    staging: 'https://usageanalyticsstaging.coveo.com'\r\n\t};\r\n\t;\r\n\tfunction defaultResponseTransformer(response) {\r\n\t    return response.json().then(function (data) {\r\n\t        data.raw = response;\r\n\t        return data;\r\n\t    });\r\n\t}\r\n\tvar Client = (function () {\r\n\t    function Client(opts) {\r\n\t        if (typeof opts === 'undefined') {\r\n\t            throw new Error('You have to pass options to this constructor');\r\n\t        }\r\n\t        this.endpoint = opts.endpoint || exports.Endpoints.default;\r\n\t        this.token = opts.token;\r\n\t        this.version = opts.version || exports.Version;\r\n\t    }\r\n\t    Client.prototype.sendEvent = function (eventType, request) {\r\n\t        return fetch(this.getRestEndpoint() + \"/analytics/\" + eventType, {\r\n\t            method: 'POST',\r\n\t            headers: this.getHeaders(),\r\n\t            mode: 'cors',\r\n\t            body: JSON.stringify(request),\r\n\t            credentials: 'include'\r\n\t        });\r\n\t    };\r\n\t    Client.prototype.sendSearchEvent = function (request) {\r\n\t        return this.sendEvent('search', request).then(defaultResponseTransformer);\r\n\t    };\r\n\t    Client.prototype.sendClickEvent = function (request) {\r\n\t        return this.sendEvent('click', request).then(defaultResponseTransformer);\r\n\t    };\r\n\t    Client.prototype.sendCustomEvent = function (request) {\r\n\t        return this.sendEvent('custom', request).then(defaultResponseTransformer);\r\n\t    };\r\n\t    Client.prototype.sendViewEvent = function (request) {\r\n\t        if (request.referrer === '') {\r\n\t            delete request.referrer;\r\n\t        }\r\n\t        return this.sendEvent('view', request).then(defaultResponseTransformer);\r\n\t    };\r\n\t    Client.prototype.getVisit = function () {\r\n\t        return fetch(this.getRestEndpoint() + \"/analytics/visit\")\r\n\t            .then(defaultResponseTransformer);\r\n\t    };\r\n\t    Client.prototype.getHealth = function () {\r\n\t        return fetch(this.getRestEndpoint() + \"/analytics/monitoring/health\")\r\n\t            .then(defaultResponseTransformer);\r\n\t    };\r\n\t    Client.prototype.getRestEndpoint = function () {\r\n\t        return this.endpoint + \"/rest/\" + this.version;\r\n\t    };\r\n\t    Client.prototype.getHeaders = function () {\r\n\t        var headers = {\r\n\t            'Content-Type': \"application/json\"\r\n\t        };\r\n\t        if (this.token) {\r\n\t            headers['Authorization'] = \"Bearer \" + this.token;\r\n\t        }\r\n\t        return headers;\r\n\t    };\r\n\t    return Client;\r\n\t}());\r\n\texports.Client = Client;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = Client;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t(function(self) {\n\t  'use strict';\n\t\n\t  if (self.fetch) {\n\t    return\n\t  }\n\t\n\t  var support = {\n\t    searchParams: 'URLSearchParams' in self,\n\t    iterable: 'Symbol' in self && 'iterator' in Symbol,\n\t    blob: 'FileReader' in self && 'Blob' in self && (function() {\n\t      try {\n\t        new Blob()\n\t        return true\n\t      } catch(e) {\n\t        return false\n\t      }\n\t    })(),\n\t    formData: 'FormData' in self,\n\t    arrayBuffer: 'ArrayBuffer' in self\n\t  }\n\t\n\t  if (support.arrayBuffer) {\n\t    var viewClasses = [\n\t      '[object Int8Array]',\n\t      '[object Uint8Array]',\n\t      '[object Uint8ClampedArray]',\n\t      '[object Int16Array]',\n\t      '[object Uint16Array]',\n\t      '[object Int32Array]',\n\t      '[object Uint32Array]',\n\t      '[object Float32Array]',\n\t      '[object Float64Array]'\n\t    ]\n\t\n\t    var isDataView = function(obj) {\n\t      return obj && DataView.prototype.isPrototypeOf(obj)\n\t    }\n\t\n\t    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n\t      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n\t    }\n\t  }\n\t\n\t  function normalizeName(name) {\n\t    if (typeof name !== 'string') {\n\t      name = String(name)\n\t    }\n\t    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n\t      throw new TypeError('Invalid character in header field name')\n\t    }\n\t    return name.toLowerCase()\n\t  }\n\t\n\t  function normalizeValue(value) {\n\t    if (typeof value !== 'string') {\n\t      value = String(value)\n\t    }\n\t    return value\n\t  }\n\t\n\t  // Build a destructive iterator for the value list\n\t  function iteratorFor(items) {\n\t    var iterator = {\n\t      next: function() {\n\t        var value = items.shift()\n\t        return {done: value === undefined, value: value}\n\t      }\n\t    }\n\t\n\t    if (support.iterable) {\n\t      iterator[Symbol.iterator] = function() {\n\t        return iterator\n\t      }\n\t    }\n\t\n\t    return iterator\n\t  }\n\t\n\t  function Headers(headers) {\n\t    this.map = {}\n\t\n\t    if (headers instanceof Headers) {\n\t      headers.forEach(function(value, name) {\n\t        this.append(name, value)\n\t      }, this)\n\t    } else if (Array.isArray(headers)) {\n\t      headers.forEach(function(header) {\n\t        this.append(header[0], header[1])\n\t      }, this)\n\t    } else if (headers) {\n\t      Object.getOwnPropertyNames(headers).forEach(function(name) {\n\t        this.append(name, headers[name])\n\t      }, this)\n\t    }\n\t  }\n\t\n\t  Headers.prototype.append = function(name, value) {\n\t    name = normalizeName(name)\n\t    value = normalizeValue(value)\n\t    var oldValue = this.map[name]\n\t    this.map[name] = oldValue ? oldValue+','+value : value\n\t  }\n\t\n\t  Headers.prototype['delete'] = function(name) {\n\t    delete this.map[normalizeName(name)]\n\t  }\n\t\n\t  Headers.prototype.get = function(name) {\n\t    name = normalizeName(name)\n\t    return this.has(name) ? this.map[name] : null\n\t  }\n\t\n\t  Headers.prototype.has = function(name) {\n\t    return this.map.hasOwnProperty(normalizeName(name))\n\t  }\n\t\n\t  Headers.prototype.set = function(name, value) {\n\t    this.map[normalizeName(name)] = normalizeValue(value)\n\t  }\n\t\n\t  Headers.prototype.forEach = function(callback, thisArg) {\n\t    for (var name in this.map) {\n\t      if (this.map.hasOwnProperty(name)) {\n\t        callback.call(thisArg, this.map[name], name, this)\n\t      }\n\t    }\n\t  }\n\t\n\t  Headers.prototype.keys = function() {\n\t    var items = []\n\t    this.forEach(function(value, name) { items.push(name) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  Headers.prototype.values = function() {\n\t    var items = []\n\t    this.forEach(function(value) { items.push(value) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  Headers.prototype.entries = function() {\n\t    var items = []\n\t    this.forEach(function(value, name) { items.push([name, value]) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  if (support.iterable) {\n\t    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n\t  }\n\t\n\t  function consumed(body) {\n\t    if (body.bodyUsed) {\n\t      return Promise.reject(new TypeError('Already read'))\n\t    }\n\t    body.bodyUsed = true\n\t  }\n\t\n\t  function fileReaderReady(reader) {\n\t    return new Promise(function(resolve, reject) {\n\t      reader.onload = function() {\n\t        resolve(reader.result)\n\t      }\n\t      reader.onerror = function() {\n\t        reject(reader.error)\n\t      }\n\t    })\n\t  }\n\t\n\t  function readBlobAsArrayBuffer(blob) {\n\t    var reader = new FileReader()\n\t    var promise = fileReaderReady(reader)\n\t    reader.readAsArrayBuffer(blob)\n\t    return promise\n\t  }\n\t\n\t  function readBlobAsText(blob) {\n\t    var reader = new FileReader()\n\t    var promise = fileReaderReady(reader)\n\t    reader.readAsText(blob)\n\t    return promise\n\t  }\n\t\n\t  function readArrayBufferAsText(buf) {\n\t    var view = new Uint8Array(buf)\n\t    var chars = new Array(view.length)\n\t\n\t    for (var i = 0; i < view.length; i++) {\n\t      chars[i] = String.fromCharCode(view[i])\n\t    }\n\t    return chars.join('')\n\t  }\n\t\n\t  function bufferClone(buf) {\n\t    if (buf.slice) {\n\t      return buf.slice(0)\n\t    } else {\n\t      var view = new Uint8Array(buf.byteLength)\n\t      view.set(new Uint8Array(buf))\n\t      return view.buffer\n\t    }\n\t  }\n\t\n\t  function Body() {\n\t    this.bodyUsed = false\n\t\n\t    this._initBody = function(body) {\n\t      this._bodyInit = body\n\t      if (!body) {\n\t        this._bodyText = ''\n\t      } else if (typeof body === 'string') {\n\t        this._bodyText = body\n\t      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n\t        this._bodyBlob = body\n\t      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n\t        this._bodyFormData = body\n\t      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n\t        this._bodyText = body.toString()\n\t      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n\t        this._bodyArrayBuffer = bufferClone(body.buffer)\n\t        // IE 10-11 can't handle a DataView body.\n\t        this._bodyInit = new Blob([this._bodyArrayBuffer])\n\t      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n\t        this._bodyArrayBuffer = bufferClone(body)\n\t      } else {\n\t        throw new Error('unsupported BodyInit type')\n\t      }\n\t\n\t      if (!this.headers.get('content-type')) {\n\t        if (typeof body === 'string') {\n\t          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n\t        } else if (this._bodyBlob && this._bodyBlob.type) {\n\t          this.headers.set('content-type', this._bodyBlob.type)\n\t        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n\t          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n\t        }\n\t      }\n\t    }\n\t\n\t    if (support.blob) {\n\t      this.blob = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return Promise.resolve(this._bodyBlob)\n\t        } else if (this._bodyArrayBuffer) {\n\t          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as blob')\n\t        } else {\n\t          return Promise.resolve(new Blob([this._bodyText]))\n\t        }\n\t      }\n\t\n\t      this.arrayBuffer = function() {\n\t        if (this._bodyArrayBuffer) {\n\t          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n\t        } else {\n\t          return this.blob().then(readBlobAsArrayBuffer)\n\t        }\n\t      }\n\t    }\n\t\n\t    this.text = function() {\n\t      var rejected = consumed(this)\n\t      if (rejected) {\n\t        return rejected\n\t      }\n\t\n\t      if (this._bodyBlob) {\n\t        return readBlobAsText(this._bodyBlob)\n\t      } else if (this._bodyArrayBuffer) {\n\t        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n\t      } else if (this._bodyFormData) {\n\t        throw new Error('could not read FormData body as text')\n\t      } else {\n\t        return Promise.resolve(this._bodyText)\n\t      }\n\t    }\n\t\n\t    if (support.formData) {\n\t      this.formData = function() {\n\t        return this.text().then(decode)\n\t      }\n\t    }\n\t\n\t    this.json = function() {\n\t      return this.text().then(JSON.parse)\n\t    }\n\t\n\t    return this\n\t  }\n\t\n\t  // HTTP methods whose capitalization should be normalized\n\t  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\t\n\t  function normalizeMethod(method) {\n\t    var upcased = method.toUpperCase()\n\t    return (methods.indexOf(upcased) > -1) ? upcased : method\n\t  }\n\t\n\t  function Request(input, options) {\n\t    options = options || {}\n\t    var body = options.body\n\t\n\t    if (input instanceof Request) {\n\t      if (input.bodyUsed) {\n\t        throw new TypeError('Already read')\n\t      }\n\t      this.url = input.url\n\t      this.credentials = input.credentials\n\t      if (!options.headers) {\n\t        this.headers = new Headers(input.headers)\n\t      }\n\t      this.method = input.method\n\t      this.mode = input.mode\n\t      if (!body && input._bodyInit != null) {\n\t        body = input._bodyInit\n\t        input.bodyUsed = true\n\t      }\n\t    } else {\n\t      this.url = String(input)\n\t    }\n\t\n\t    this.credentials = options.credentials || this.credentials || 'omit'\n\t    if (options.headers || !this.headers) {\n\t      this.headers = new Headers(options.headers)\n\t    }\n\t    this.method = normalizeMethod(options.method || this.method || 'GET')\n\t    this.mode = options.mode || this.mode || null\n\t    this.referrer = null\n\t\n\t    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n\t      throw new TypeError('Body not allowed for GET or HEAD requests')\n\t    }\n\t    this._initBody(body)\n\t  }\n\t\n\t  Request.prototype.clone = function() {\n\t    return new Request(this, { body: this._bodyInit })\n\t  }\n\t\n\t  function decode(body) {\n\t    var form = new FormData()\n\t    body.trim().split('&').forEach(function(bytes) {\n\t      if (bytes) {\n\t        var split = bytes.split('=')\n\t        var name = split.shift().replace(/\\+/g, ' ')\n\t        var value = split.join('=').replace(/\\+/g, ' ')\n\t        form.append(decodeURIComponent(name), decodeURIComponent(value))\n\t      }\n\t    })\n\t    return form\n\t  }\n\t\n\t  function parseHeaders(rawHeaders) {\n\t    var headers = new Headers()\n\t    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n\t      var parts = line.split(':')\n\t      var key = parts.shift().trim()\n\t      if (key) {\n\t        var value = parts.join(':').trim()\n\t        headers.append(key, value)\n\t      }\n\t    })\n\t    return headers\n\t  }\n\t\n\t  Body.call(Request.prototype)\n\t\n\t  function Response(bodyInit, options) {\n\t    if (!options) {\n\t      options = {}\n\t    }\n\t\n\t    this.type = 'default'\n\t    this.status = 'status' in options ? options.status : 200\n\t    this.ok = this.status >= 200 && this.status < 300\n\t    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n\t    this.headers = new Headers(options.headers)\n\t    this.url = options.url || ''\n\t    this._initBody(bodyInit)\n\t  }\n\t\n\t  Body.call(Response.prototype)\n\t\n\t  Response.prototype.clone = function() {\n\t    return new Response(this._bodyInit, {\n\t      status: this.status,\n\t      statusText: this.statusText,\n\t      headers: new Headers(this.headers),\n\t      url: this.url\n\t    })\n\t  }\n\t\n\t  Response.error = function() {\n\t    var response = new Response(null, {status: 0, statusText: ''})\n\t    response.type = 'error'\n\t    return response\n\t  }\n\t\n\t  var redirectStatuses = [301, 302, 303, 307, 308]\n\t\n\t  Response.redirect = function(url, status) {\n\t    if (redirectStatuses.indexOf(status) === -1) {\n\t      throw new RangeError('Invalid status code')\n\t    }\n\t\n\t    return new Response(null, {status: status, headers: {location: url}})\n\t  }\n\t\n\t  self.Headers = Headers\n\t  self.Request = Request\n\t  self.Response = Response\n\t\n\t  self.fetch = function(input, init) {\n\t    return new Promise(function(resolve, reject) {\n\t      var request = new Request(input, init)\n\t      var xhr = new XMLHttpRequest()\n\t\n\t      xhr.onload = function() {\n\t        var options = {\n\t          status: xhr.status,\n\t          statusText: xhr.statusText,\n\t          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n\t        }\n\t        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n\t        var body = 'response' in xhr ? xhr.response : xhr.responseText\n\t        resolve(new Response(body, options))\n\t      }\n\t\n\t      xhr.onerror = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.ontimeout = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.open(request.method, request.url, true)\n\t\n\t      if (request.credentials === 'include') {\n\t        xhr.withCredentials = true\n\t      }\n\t\n\t      if ('responseType' in xhr && support.blob) {\n\t        xhr.responseType = 'blob'\n\t      }\n\t\n\t      request.headers.forEach(function(value, name) {\n\t        xhr.setRequestHeader(name, value)\n\t      })\n\t\n\t      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n\t    })\n\t  }\n\t  self.fetch.polyfill = true\n\t})(typeof self !== 'undefined' ? self : this);\n\t\n\t\n\t/*** EXPORTS FROM exports-loader ***/\n\tmodule.exports = self.fetch;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\r\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\r\n\tvar objectAssignPonyfill = function (target) {\r\n\t    var sources = [];\r\n\t    for (var _i = 1; _i < arguments.length; _i++) {\r\n\t        sources[_i - 1] = arguments[_i];\r\n\t    }\r\n\t    if (target === undefined || target === null) {\r\n\t        throw new TypeError('Cannot convert undefined or null to object');\r\n\t    }\r\n\t    var output = Object(target);\r\n\t    sources.forEach(function (source) {\r\n\t        var from = Object(source);\r\n\t        for (var key in from) {\r\n\t            if (hasOwnProperty.call(from, key)) {\r\n\t                output[key] = from[key];\r\n\t            }\r\n\t        }\r\n\t        if (getOwnPropertySymbols) {\r\n\t            var symbols = getOwnPropertySymbols(from);\r\n\t            symbols.forEach(function (symbol) {\r\n\t                if (propIsEnumerable.call(from, symbol)) {\r\n\t                    output[symbol] = from[symbol];\r\n\t                }\r\n\t            });\r\n\t        }\r\n\t    });\r\n\t    return output;\r\n\t};\r\n\texports.assign = typeof Object.assign === 'function' ? Object.assign : objectAssignPonyfill;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = exports.assign;\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tfunction popFromObject(object, key) {\r\n\t    if (object) {\r\n\t        var value = object[key];\r\n\t        delete object[key];\r\n\t        return value;\r\n\t    }\r\n\t}\r\n\texports.popFromObject = popFromObject;\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar analytics = __webpack_require__(2);\r\n\texports.analytics = analytics;\r\n\tvar SimpleAnalytics = __webpack_require__(1);\r\n\texports.SimpleAnalytics = SimpleAnalytics;\r\n\tvar history = __webpack_require__(7);\r\n\texports.history = history;\r\n\tvar donottrack = __webpack_require__(11);\r\n\texports.donottrack = donottrack;\r\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar storage_1 = __webpack_require__(8);\r\n\texports.STORE_KEY = '__coveo.analytics.history';\r\n\texports.MAX_NUMBER_OF_HISTORY_ELEMENTS = 20;\r\n\tvar HistoryStore = (function () {\r\n\t    function HistoryStore(store) {\r\n\t        this.store = store || storage_1.getAvailableStorage();\r\n\t    }\r\n\t    ;\r\n\t    HistoryStore.prototype.addElement = function (elem) {\r\n\t        if (this.getHistory() != null) {\r\n\t            this.setHistory([elem].concat(this.getHistory()));\r\n\t        }\r\n\t        else {\r\n\t            this.setHistory([elem]);\r\n\t        }\r\n\t    };\r\n\t    HistoryStore.prototype.getHistory = function () {\r\n\t        try {\r\n\t            return JSON.parse(this.store.getItem(exports.STORE_KEY));\r\n\t        }\r\n\t        catch (e) {\r\n\t            return [];\r\n\t        }\r\n\t    };\r\n\t    HistoryStore.prototype.setHistory = function (history) {\r\n\t        try {\r\n\t            this.store.setItem(exports.STORE_KEY, JSON.stringify(history.slice(0, exports.MAX_NUMBER_OF_HISTORY_ELEMENTS)));\r\n\t        }\r\n\t        catch (e) { }\r\n\t    };\r\n\t    HistoryStore.prototype.clear = function () {\r\n\t        try {\r\n\t            this.store.removeItem(exports.STORE_KEY);\r\n\t        }\r\n\t        catch (e) { }\r\n\t    };\r\n\t    return HistoryStore;\r\n\t}());\r\n\texports.HistoryStore = HistoryStore;\r\n\t;\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = HistoryStore;\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar detector = __webpack_require__(9);\r\n\tvar cookieutils_1 = __webpack_require__(10);\r\n\tfunction getAvailableStorage() {\r\n\t    if (detector.hasCookieStorage()) {\r\n\t        return new CookieStorage();\r\n\t    }\r\n\t    if (detector.hasSessionStorage()) {\r\n\t        return sessionStorage;\r\n\t    }\r\n\t    if (detector.hasLocalStorage()) {\r\n\t        return localStorage;\r\n\t    }\r\n\t    return new NullStorage();\r\n\t}\r\n\texports.getAvailableStorage = getAvailableStorage;\r\n\tvar CookieStorage = (function () {\r\n\t    function CookieStorage() {\r\n\t    }\r\n\t    CookieStorage.prototype.getItem = function (key) {\r\n\t        return cookieutils_1.Cookie.get(key);\r\n\t    };\r\n\t    CookieStorage.prototype.removeItem = function (key) {\r\n\t        cookieutils_1.Cookie.erase(key);\r\n\t    };\r\n\t    CookieStorage.prototype.setItem = function (key, data) {\r\n\t        cookieutils_1.Cookie.set(key, data);\r\n\t    };\r\n\t    return CookieStorage;\r\n\t}());\r\n\texports.CookieStorage = CookieStorage;\r\n\tvar NullStorage = (function () {\r\n\t    function NullStorage() {\r\n\t    }\r\n\t    NullStorage.prototype.getItem = function (key) { return ''; };\r\n\t    NullStorage.prototype.removeItem = function (key) { };\r\n\t    NullStorage.prototype.setItem = function (key, data) { };\r\n\t    return NullStorage;\r\n\t}());\r\n\texports.NullStorage = NullStorage;\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tfunction hasLocalStorage() {\r\n\t    try {\r\n\t        return 'localStorage' in window && window['localStorage'] !== null;\r\n\t    }\r\n\t    catch (e) {\r\n\t        return false;\r\n\t    }\r\n\t}\r\n\texports.hasLocalStorage = hasLocalStorage;\r\n\t;\r\n\tfunction hasSessionStorage() {\r\n\t    try {\r\n\t        return 'sessionStorage' in window && window['sessionStorage'] !== null;\r\n\t    }\r\n\t    catch (e) {\r\n\t        return false;\r\n\t    }\r\n\t}\r\n\texports.hasSessionStorage = hasSessionStorage;\r\n\t;\r\n\tfunction hasCookieStorage() {\r\n\t    return navigator.cookieEnabled;\r\n\t}\r\n\texports.hasCookieStorage = hasCookieStorage;\r\n\t;\r\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Cookie = (function () {\r\n\t    function Cookie() {\r\n\t    }\r\n\t    Cookie.set = function (name, value, expiration) {\r\n\t        var domain, domainParts, date, expires, host;\r\n\t        if (expiration) {\r\n\t            date = new Date();\r\n\t            date.setTime(date.getTime() + expiration);\r\n\t            expires = '; expires=' + date.toGMTString();\r\n\t        }\r\n\t        else {\r\n\t            expires = '';\r\n\t        }\r\n\t        host = location.hostname;\r\n\t        if (host.indexOf('.') === -1) {\r\n\t            document.cookie = name + '=' + value + expires + '; path=/';\r\n\t        }\r\n\t        else {\r\n\t            domainParts = host.split('.');\r\n\t            domainParts.shift();\r\n\t            domain = '.' + domainParts.join('.');\r\n\t            document.cookie = name + '=' + value + expires + '; path=/; domain=' + domain;\r\n\t            if (Cookie.get(name) == null || Cookie.get(name) != value) {\r\n\t                domain = '.' + host;\r\n\t                document.cookie = name + '=' + value + expires + '; path=/; domain=' + domain;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Cookie.get = function (name) {\r\n\t        var cookiePrefix = name + '=';\r\n\t        var cookieArray = document.cookie.split(';');\r\n\t        for (var i = 0; i < cookieArray.length; i++) {\r\n\t            var cookie = cookieArray[i];\r\n\t            cookie = cookie.replace(/^\\s+/, '');\r\n\t            if (cookie.indexOf(cookiePrefix) == 0) {\r\n\t                return cookie.substring(cookiePrefix.length, cookie.length);\r\n\t            }\r\n\t        }\r\n\t        return null;\r\n\t    };\r\n\t    Cookie.erase = function (name) {\r\n\t        Cookie.set(name, '', -1);\r\n\t    };\r\n\t    return Cookie;\r\n\t}());\r\n\texports.Cookie = Cookie;\r\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\texports.doNotTrack = [true, 'yes', '1'].indexOf(navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack);\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = exports.doNotTrack;\r\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** coveoua.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4bc27ccb2f93e914e9c3\n **/","import SimpleAnalytics from './simpleanalytics';\r\nimport * as analytics from './index';\r\nimport { HistoryStore, HistoryViewElement } from './history';\r\n\r\ndeclare const global: any;\r\n\r\n// CoveoUAGlobal is the interface for the global function which also has a\r\n// queue `q` of unexecuted parameters\r\nexport interface CoveoUAGlobal {\r\n    (action: string, ...params: string[]): void;\r\n    // CoveoAnalytics.q is the queue of last called actions before lib was included\r\n    q?: string[][];\r\n    disableAutoHistory: boolean;\r\n}\r\n\r\n// On load of this script we get the global object `coveoua` (which would be)\r\n// on `window` in a browser\r\nconst coveoua: CoveoUAGlobal = global.coveoua || {};\r\n\r\n// On normal execution this library should be loaded after the snippet execution\r\n// so we will execute the actions in the `q` array\r\nif (coveoua.q) {\r\n  coveoua.q.forEach( (args: Array<string>) => SimpleAnalytics.apply(void 0, args));\r\n}\r\n\r\n// According to the Mozilla Do Not Track Field Guide\r\n// (https://developer.mozilla.org/en-US/docs/Web/Security/Do_not_track_field_guide),\r\n// gathering data of actions of an user as long as it is not associated to the\r\n// identity of that user, doNotTrack is not enabled here.\r\nif (!coveoua.disableAutoHistory) {\r\n    const store = new HistoryStore();\r\n    let historyElement: HistoryViewElement = {\r\n        name: 'PageView',\r\n        value: document.location.toString(),\r\n        time: JSON.stringify(new Date()),\r\n        title: document.title\r\n    };\r\n    store.addElement(historyElement);\r\n}\r\n\r\n// Replace the quick shim with the real thing.\r\nglobal.coveoua = SimpleAnalytics;\r\n//\r\nglobal.coveoanalytics = analytics;\r\n\r\nexport default coveoua;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/browser.ts\n **/","import AnalyticsClient from './analyticsclient';\r\nimport * as analytics from './analytics';\r\nimport objectAssign from './objectassign';\r\nimport {popFromObject} from './utils';\r\n\r\n// SimpleAPI mimics the GoogleAnalytics API.\r\nexport class SimpleAPI {\r\n    private client: AnalyticsClient;\r\n\r\n    // init initializes a new SimpleAPI client.\r\n    // @param token is your coveo access_token / api_key / ...\r\n    // @param endpoint is the endpoint you want to target defaults to the\r\n    //        usage analytics production endpoint\r\n    init(token: string | AnalyticsClient, endpoint: string): void {\r\n        if (typeof token === 'undefined') {\r\n            throw new Error(`You must pass your token when you call 'init'`);\r\n        }\r\n        if (typeof token === 'string') {\r\n            endpoint = endpoint || analytics.Endpoints.default;\r\n            this.client = new analytics.Client({\r\n                token: token,\r\n                endpoint: endpoint\r\n            });\r\n        } else if (typeof token === 'object' && typeof token.sendEvent !== 'undefined') {\r\n            this.client = token;\r\n        } else {\r\n            throw new Error(`You must pass either your token or a valid object when you call 'init'`);\r\n        }\r\n    }\r\n\r\n    send(event: EventType, customData: any): void {\r\n        if (typeof this.client == 'undefined') {\r\n            throw new Error(`You must call init before sending an event`);\r\n        }\r\n\r\n        customData = objectAssign({}, {\r\n            hash: window.location.hash\r\n        }, customData);\r\n\r\n        switch (event) {\r\n            case 'pageview':\r\n                this.client.sendViewEvent({\r\n                    location: window.location.toString(),\r\n                    referrer: document.referrer,\r\n                    language: navigator.language,\r\n                    title: document.title,\r\n                    contentIdKey: popFromObject(customData, 'contentIdKey'),\r\n                    contentIdValue: popFromObject(customData, 'contentIdValue'),\r\n                    contentType: popFromObject(customData, 'contentType'),\r\n                    customData: customData\r\n                });\r\n                return;\r\n            default:\r\n                throw new Error(`Event type: '${event}' not implemented`);\r\n        }\r\n    }\r\n}\r\n\r\nexport type EventType = 'pageview';\r\n\r\n// simpleAPI singleton\r\nconst simpleAPI = new SimpleAPI();\r\n\r\nexport const SimpleAnalytics = (action: string, ...params: any[]): any => {\r\n  const actionFunction = (<any>simpleAPI)[action];\r\n  if (actionFunction) {\r\n    return actionFunction.apply(simpleAPI, params);\r\n  }\r\n};\r\n\r\nexport default SimpleAnalytics;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/simpleanalytics.ts\n **/","import {\r\n    SearchEventRequest, SearchEventResponse,\r\n    ClickEventRequest, ClickEventResponse,\r\n    CustomEventRequest, CustomEventResponse,\r\n    ViewEventRequest, ViewEventResponse,\r\n    VisitResponse, HealthResponse\r\n} from './events';\r\nimport { AnalyticsClient } from './analyticsclient';\r\n\r\nexport const Version = 'v15';\r\n\r\nexport const Endpoints = {\r\n  default: 'https://usageanalytics.coveo.com',\r\n  production: 'https://usageanalytics.coveo.com',\r\n  dev: 'https://usageanalyticsdev.coveo.com',\r\n  staging: 'https://usageanalyticsstaging.coveo.com'\r\n};\r\n\r\nexport interface ClientOptions {\r\n  token?: string;\r\n  endpoint?: string;\r\n  version?: string;\r\n};\r\n\r\nfunction defaultResponseTransformer(response: IResponse): Promise<any> {\r\n    return response.json().then((data: any) => {\r\n        data.raw = response;\r\n        return data;\r\n    });\r\n}\r\n\r\nexport class Client implements AnalyticsClient {\r\n    private endpoint: string;\r\n    private token: string;\r\n    private version: string;\r\n\r\n    constructor(opts: ClientOptions) {\r\n        if (typeof opts === 'undefined') {\r\n            throw new Error('You have to pass options to this constructor');\r\n        }\r\n\r\n        this.endpoint = opts.endpoint || Endpoints.default;\r\n        this.token = opts.token;\r\n        this.version = opts.version || Version;\r\n    }\r\n\r\n    sendEvent(eventType: string, request: any): Promise<IResponse> {\r\n        return fetch(`${this.getRestEndpoint()}/analytics/${eventType}`, {\r\n            method: 'POST',\r\n            headers: this.getHeaders(),\r\n            mode: 'cors',\r\n            body: JSON.stringify(request),\r\n            credentials: 'include'\r\n        });\r\n    }\r\n\r\n    sendSearchEvent(request: SearchEventRequest): Promise<SearchEventResponse> {\r\n        return this.sendEvent('search', request).then(defaultResponseTransformer);\r\n    }\r\n\r\n    sendClickEvent(request: ClickEventRequest): Promise<ClickEventResponse> {\r\n        return this.sendEvent('click', request).then(defaultResponseTransformer);\r\n    }\r\n\r\n    sendCustomEvent(request: CustomEventRequest): Promise<CustomEventResponse> {\r\n        return this.sendEvent('custom', request).then(defaultResponseTransformer);\r\n    }\r\n\r\n    sendViewEvent(request: ViewEventRequest): Promise<ViewEventResponse> {\r\n        if (request.referrer === '') { delete request.referrer; }\r\n        return this.sendEvent('view', request).then(defaultResponseTransformer);\r\n    }\r\n\r\n    getVisit(): Promise<VisitResponse> {\r\n        return fetch(`${this.getRestEndpoint()}/analytics/visit`)\r\n            .then(defaultResponseTransformer);\r\n    }\r\n\r\n    getHealth(): Promise<HealthResponse> {\r\n        return fetch(`${this.getRestEndpoint()}/analytics/monitoring/health`)\r\n            .then(defaultResponseTransformer);\r\n    }\r\n\r\n    protected getRestEndpoint(): string {\r\n        return `${this.endpoint}/rest/${this.version}`;\r\n    }\r\n\r\n    protected getHeaders(): any {\r\n        var headers: any = {\r\n            'Content-Type': `application/json`\r\n        };\r\n        if (this.token) {\r\n            headers['Authorization'] = `Bearer ${this.token}`;\r\n        }\r\n        return headers;\r\n    }\r\n}\r\n\r\nexport default Client;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/analytics.ts\n **/","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = self.fetch;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/exports-loader?self.fetch!./~/whatwg-fetch/fetch.js\n ** module id = 3\n ** module chunks = 0\n **/","// objectAssing ponyfill by sindresorhus ported to typescript\r\n// https://github.com/sindresorhus/object-assign/blob/master/index.js\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\nconst getOwnPropertySymbols: any = (<any>Object).getOwnPropertySymbols;\r\nconst propIsEnumerable = Object.prototype.propertyIsEnumerable;\r\n\r\nexport interface IObjectAssign {\r\n    (target: any, ...sources: any[]) : any;\r\n}\r\n\r\nconst objectAssignPonyfill: IObjectAssign = (target: any, ...sources: any[]): any => {\r\n    if (target === undefined || target === null) {\r\n        throw new TypeError('Cannot convert undefined or null to object');\r\n    }\r\n\r\n    const output = Object(target);\r\n\r\n    sources.forEach((source) => {\r\n        const from = Object(source);\r\n\r\n        for (var key in from) {\r\n            if (hasOwnProperty.call(from, key)) {\r\n                output[key] = from[key];\r\n            }\r\n        }\r\n\r\n        if (getOwnPropertySymbols) {\r\n            const symbols = getOwnPropertySymbols(from);\r\n            symbols.forEach((symbol: any) => {\r\n                if (propIsEnumerable.call(from, symbol)) {\r\n                    output[symbol] = from[symbol];\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return output;\r\n};\r\n\r\nexport const assign: IObjectAssign = typeof (<any>Object).assign === 'function' ?  (<any>Object).assign : objectAssignPonyfill;\r\nexport default assign;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/objectassign.ts\n **/","export function popFromObject(object: any, key: string): string {\r\n    if (object) {\r\n        var value = object[key];\r\n        delete object[key];\r\n        return value;\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/utils.ts\n **/","import * as analytics from './analytics';\r\nimport * as SimpleAnalytics from './simpleanalytics';\r\nimport * as history from './history';\r\nimport * as donottrack from './donottrack';\r\nexport {\r\n    analytics,\r\n    donottrack,\r\n    history,\r\n    SimpleAnalytics\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/index.ts\n **/","import {WebStorage, getAvailableStorage} from './storage';\r\n\r\nexport const STORE_KEY: string = '__coveo.analytics.history';\r\nexport const MAX_NUMBER_OF_HISTORY_ELEMENTS: number = 20;\r\n\r\nexport class HistoryStore {\r\n    private store: WebStorage;\r\n    constructor(store?: WebStorage) {\r\n        this.store = store || getAvailableStorage();\r\n    };\r\n\r\n    addElement(elem: HistoryElement) {\r\n        if (this.getHistory() != null) {\r\n            this.setHistory([elem].concat(this.getHistory()));\r\n        } else {\r\n            this.setHistory([elem]);\r\n        }\r\n    }\r\n\r\n    getHistory(): HistoryElement[] {\r\n        try {\r\n            return <HistoryElement[]> JSON.parse(this.store.getItem(STORE_KEY));\r\n        } catch (e) {\r\n            // When using the Storage APIs (localStorage/sessionStorage)\r\n            // Safari says that those APIs are available but throws when making\r\n            // a call to them.\r\n            return [];\r\n        }\r\n    }\r\n\r\n    setHistory(history: HistoryElement[]) {\r\n        try {\r\n            this.store.setItem(STORE_KEY, JSON.stringify(history.slice(0, MAX_NUMBER_OF_HISTORY_ELEMENTS)));\r\n        } catch (e) { /* refer to this.getHistory() */ }\r\n    }\r\n\r\n    clear() {\r\n        try {\r\n            this.store.removeItem(STORE_KEY);\r\n        } catch (e) { /* refer to this.getHistory() */ }\r\n    }\r\n}\r\n\r\nexport interface HistoryElement {\r\n    name: string;\r\n    value: string;\r\n    time: string;\r\n};\r\n\r\nexport interface HistoryViewElement extends HistoryElement {\r\n    title?: string;\r\n}\r\n\r\nexport default HistoryStore;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/history.ts\n **/","import * as detector from './detector';\r\nimport { Cookie } from './cookieutils';\r\n\r\nexport interface WebStorage {\r\n    getItem(key: string): string;\r\n    removeItem(key: string): void;\r\n    setItem(key: string, data: string): void;\r\n}\r\n\r\nexport function getAvailableStorage(): WebStorage {\r\n    if (detector.hasCookieStorage()) {\r\n        return new CookieStorage();\r\n    }\r\n    if (detector.hasSessionStorage()) {\r\n        return sessionStorage;\r\n    }\r\n    if (detector.hasLocalStorage()) {\r\n        return localStorage;\r\n    }\r\n    return new NullStorage();\r\n}\r\n\r\nexport class CookieStorage implements WebStorage {\r\n    getItem(key: string): string {\r\n        return Cookie.get(key);\r\n    }\r\n    removeItem(key: string) {\r\n        Cookie.erase(key);\r\n    }\r\n    setItem(key: string, data: string): void {\r\n        Cookie.set(key, data);\r\n    }\r\n}\r\n\r\nexport class NullStorage implements WebStorage {\r\n    getItem(key: string): string { return ''; }\r\n    removeItem(key: string) {/**/}\r\n    setItem(key: string, data: string): void {/**/}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/storage.ts\n **/","export function hasLocalStorage(): boolean {\r\n    try {\r\n      return 'localStorage' in window && window['localStorage'] !== null;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n};\r\n\r\nexport function hasSessionStorage(): boolean {\r\n    try {\r\n      return 'sessionStorage' in window && window['sessionStorage'] !== null;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n};\r\n\r\nexport function hasCookieStorage(): boolean {\r\n    return navigator.cookieEnabled;\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/detector.ts\n **/","// Code originally taken from : https://developers.livechatinc.com/blog/setting-cookies-to-subdomains-in-javascript/\r\nexport class Cookie {\r\n  static set(name: string, value: string, expiration?: number) {\r\n    var domain: string, domainParts: string[], date: any, expires: string, host: string;\r\n\r\n    if (expiration) {\r\n      date = new Date();\r\n      date.setTime(date.getTime() + expiration);\r\n      expires = '; expires=' + date.toGMTString();\r\n    } else {\r\n      expires = '';\r\n    }\r\n\r\n    host = location.hostname;\r\n    if (host.indexOf('.') === -1) {\r\n      // no \".\" in a domain - it's localhost or something similar\r\n      document.cookie = name + '=' + value + expires + '; path=/';\r\n    } else {\r\n      // Remember the cookie on all subdomains.\r\n      //\r\n      // Start with trying to set cookie to the top domain.\r\n      // (example: if user is on foo.com, try to set\r\n      //  cookie to domain \".com\")\r\n      //\r\n      // If the cookie will not be set, it means \".com\"\r\n      // is a top level domain and we need to\r\n      // set the cookie to \".foo.com\"\r\n      domainParts = host.split('.');\r\n      domainParts.shift();\r\n      domain = '.' + domainParts.join('.');\r\n\r\n      document.cookie = name + '=' + value + expires + '; path=/; domain=' + domain;\r\n\r\n      // check if cookie was successfuly set to the given domain\r\n      // (otherwise it was a Top-Level Domain)\r\n      if (Cookie.get(name) == null || Cookie.get(name) != value) {\r\n        // append \".\" to current domain\r\n        domain = '.' + host;\r\n        document.cookie = name + '=' + value + expires + '; path=/; domain=' + domain;\r\n      }\r\n    }\r\n  }\r\n\r\n  static get(name: string) {\r\n    var cookiePrefix = name + '=';\r\n    var cookieArray = document.cookie.split(';');\r\n    for (var i = 0; i < cookieArray.length; i++) {\r\n      var cookie = cookieArray[i];\r\n      cookie = cookie.replace(/^\\s+/, '');\r\n\r\n      if (cookie.indexOf(cookiePrefix) == 0) {\r\n        return cookie.substring(cookiePrefix.length, cookie.length);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  static erase(name: string) {\r\n    Cookie.set(name, '', -1);\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/cookieutils.ts\n **/","// Read the Mozilla Do Not Track Field Guide\r\n// (https://developer.mozilla.org/en-US/docs/Web/Security/Do_not_track_field_guide),\r\n// for information on how to use the donottrack\r\n// gathering data of actions of an user as long as it is not associated to the\r\n// identity of that user, doNotTrack is not enabled here.\r\nexport const doNotTrack = [true, 'yes', '1'].indexOf( (<any>navigator).doNotTrack || (<any>navigator).msDoNotTrack || (<any>window).doNotTrack);\r\n\r\nexport default doNotTrack;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/donottrack.ts\n **/"],"sourceRoot":""}